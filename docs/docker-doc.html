<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>About Docker &mdash; elabftw 5.1.15 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=6d288cbf"></script>
        <script src="_static/doctools.js?v=9bcbadda"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Upgrade a normal install to a Docker install" href="upgrade-to-docker.html" />
    <link rel="prev" title="Features" href="features.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            elabftw
          </a>
              <div class="version">
                5.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Install on a GNU/Linux server</a></li>
<li class="toctree-l1"><a class="reference internal" href="install-cloud.html">Install in the cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="install-nas.html">Install on a NAS</a></li>
<li class="toctree-l1"><a class="reference internal" href="install-nolinux.html">Install on Mac or Windows</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="generalities.html">Generalities</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-guide.html">User guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="admin-guide.html">Admin guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="sysadmin-guide.html">Sysadmin guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="import-export.html">Import / Export</a></li>
<li class="toctree-l1"><a class="reference internal" href="metadata.html">Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="backup.html">How to backup</a></li>
<li class="toctree-l1"><a class="reference internal" href="how-to-update.html">How to update</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Features</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">About Docker</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-does-it-work">How does it work?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#about-the-docker-image">About the Docker image</a></li>
<li class="toctree-l2"><a class="reference internal" href="#why-can-t-i-run-it-outside-docker">Why can’t I run it outside Docker</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="upgrade-to-docker.html">Upgrade a normal install to a Docker install</a></li>
<li class="toctree-l1"><a class="reference internal" href="ldap.html">Configure LDAP authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="saml.html">Configure SAML2 authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="debug.html">Debug</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="thanks.html">Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">elabftw</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">About Docker</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/docker-doc.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="about-docker">
<span id="docker-doc"></span><h1>About Docker<a class="headerlink" href="#about-docker" title="Link to this heading"></a></h1>
<img alt="docker" class="align-center" src="_images/docker.png" />
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading"></a></h2>
<p>This page explains the containerization technology in broad strokes.</p>
<p>eLabFTW works with containers (<a class="reference external" href="https://en.wikipedia.org/wiki/Container_(virtualization)">wikipedia</a>). The <a class="reference external" href="https://hub.docker.com/r/elabftw/elabimg">official image</a>, from which containers will be created, bundles everything eLabFTW needs to run. This workflow can be managed by <a class="reference external" href="https://www.docker.com/">Docker</a> with <a class="reference external" href="https://docs.docker.com/compose/install/">docker-compose</a> or <a class="reference external" href="https://podman.io/">Podman</a> with systemd services.</p>
<p>One of the main advantages of using the containerization technology is to allow you to run eLabFTW without modifying the configuration of your server. By using the official image you don’t have to worry about missing php extensions, wrong php version or misconfigurations of the server because everything was configured for you beforehand. It’s also <strong>much easier to upgrade</strong> and keep your installation up to date and secure.</p>
<p>On the development side, it facilitate many things as it gives more control to the application environment to the developers.</p>
<p>Finally, the containerization technology is massively used nowadays by cloud/IT companies and you can imagine that there are many good reasons for that.</p>
</section>
<section id="how-does-it-work">
<h2>How does it work?<a class="headerlink" href="#how-does-it-work" title="Link to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This document is about Docker + docker-compose but the same principles apply to a Podman installation.</p>
</div>
<p>The most important file is your docker-compose configuration file (see <a class="reference external" href="https://github.com/elabftw/elabimg/blob/master/src/docker-compose.yml-EXAMPLE">example file</a>). While it is possible to launch containers without docker-compose (by running individual <cite>docker run …</cite> commands), it is strongly advised to use this <cite>docker-compose.yml</cite> file (or <cite>/etc/elabftw.yml</cite>). It contains all the configuration options needed to customize your instance.</p>
<p>Docker will take care of downloading the official image. In the <cite>image:</cite> part of the configuration, you can target a specific version or branch by specifying a tag. Example: <cite>image: elabftw/elabimg:4.3.0</cite> or <cite>image: elabftw/elabimg:next</cite>. Omitting a tag corresponds to <cite>latest</cite>, which will pull the latest stable version.</p>
<p>Once downloaded, a container is created from the image, and the webserver starts to listen on the specified port for incoming requests. The default configuration also launches a MySQL container from the official MySQL image but it is not mandatory and another MySQL server can be used. Other containers like Redis or PHPMyAdmin can also be launched, depending on the configuration you want.</p>
<p>If you already have let’s say an Apache server running and are considering installing eLabFTW along your other PHP projects, know that you can keep your existing Apache installation and use it as a reverse proxy to a Docker container. See the <a class="reference external" href="https://github.com/elabftw/elabdoc/tree/master/config_examples">documentation for reverse proxies</a>.</p>
</section>
<section id="about-the-docker-image">
<h2>About the Docker image<a class="headerlink" href="#about-the-docker-image" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>The eLabFTW Docker image is using <a class="reference external" href="https://alpinelinux.org/">Alpine Linux</a> as a base OS, so we get a lightweight and secure base.</p></li>
<li><p><a class="reference external" href="https://www.php.net/">PHP 8</a> is used so we get an up to date and fast PHP.</p></li>
<li><p><a class="reference external" href="https://nginx.org">Nginx</a> is used so we get the best webserver out there running our app with <a class="reference external" href="https://en.wikipedia.org/wiki/HTTP/2">HTTP/2</a> capabilities. A custom nginx is compiled for eLabFTW.</p></li>
</ul>
<p>Using the provided Docker image adds security features automatically:</p>
<ul class="simple">
<li><p>header X-Frame-Option</p></li>
<li><p>header X-XSS-Protection</p></li>
<li><p>header X-Content-Type-Options</p></li>
<li><p>header Strict-Transport-Security</p></li>
<li><p>header Content-Security-Policy to prevent XSS</p></li>
<li><p>use Diffie-Hellman for key exchange with 2048 bits parameter</p></li>
<li><p>use modern cipher suite and protocols for SSL. This will result in an A rating on <a class="reference external" href="https://www.ssllabs.com/ssltest/">SSLLabs</a>, as you can see below.</p></li>
<li><p>custom secure php configuration</p></li>
<li><p>custom secure nginx configuration</p></li>
<li><p>have a score of 115/100 on <a class="reference external" href="https://observatory.mozilla.org/">Mozilla’s Observatory</a>:</p></li>
</ul>
<img alt="mozilla's observatory scan" class="align-center" src="_images/observatory.png" />
<p>Test scan of an eLabFTW install at <a class="reference external" href="https://securityheaders.io">SecurityHeaders.io</a>:</p>
<img alt="security headers result" class="align-center" src="_images/securityheaders.io.png" />
<p>Test scan of an eLabFTW install at <a class="reference external" href="https://www.ssllabs.com/ssltest/">Qualys SSL labs</a>:</p>
<img alt="SSL labs report" class="align-center" src="_images/qualys-ssl-report.png" />
<p>Just for fun, try to use these two websites to scan the sites of other services you might use or consider using. You’ll see a lot of F marks… I’ll let you draw your own conclusions from that ;)</p>
<p>You don’t have to be a specialist in web security to see that some services are completely insecure and should be avoided. There is a reason why cybercrime makes millions of dollars, a lot of companies have outdated installations and never follow good practices.</p>
<p>While full security can never be completely achieved when it comes to web and computers, with eLabFTW at least you have the best possible setup to mitigate or stop the most commons attacks. Especially if you use a Docker container.</p>
</section>
<section id="why-can-t-i-run-it-outside-docker">
<h2>Why can’t I run it outside Docker<a class="headerlink" href="#why-can-t-i-run-it-outside-docker" title="Link to this heading"></a></h2>
<p>While there might be valid use case for running eLabFTW without containers (example: running a BSD operating system), a choice have been made to completely drop support for non-Docker installations.</p>
<p>An application like eLabFTW is highly complex and composed of many parts. Using a container removes variability and prevents misconfigurations and bugs. There are so many ways to run a PHP app that it quickly becomes an impossible task to correctly test for all use cases. Having to support two kind of installs (with and without Docker) adds complexity to the code and documentation.</p>
<p><strong>Real world reasons that motivated this choice:</strong></p>
<ul class="simple">
<li><p>users running eLabFTW without proper security headers in the webserver config</p></li>
<li><p>issues related to a different webserver (eLabFTW uses nginx)</p></li>
<li><p>issues related to different operating systems</p></li>
<li><p>unnecessary complexity in the code to check if things are available and support different configurations</p></li>
<li><p>unnecessary documentation work for non-Docker users</p></li>
<li><p>high time cost of upgrading for sysadmins due to dependencies updates (example: installing new php version) leaving instances out-of-date</p></li>
<li><p>all the positive aspects of running containers, as described above</p></li>
</ul>
<p>Running an eLabFTW instance in Docker doesn’t mean there will never be any issue, but at least it reduces greatly the “bug surface”.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="features.html" class="btn btn-neutral float-left" title="Features" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="upgrade-to-docker.html" class="btn btn-neutral float-right" title="Upgrade a normal install to a Docker install" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2012, Nicolas CARPi.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
  <a href='https://creativecommons.org/licenses/by-sa/4.0/'><img src='_images/by-sa.png' alt='cc-by-sa' /></a>


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>